{
  "title"      : "vifros API root.",
  "description": "An hypermedia RESTful API to manage a vifros instance.",

  "methods": {
    "GET": {
      "title": "Show root level menu."
    }
  },

  "children": {
    "interfaces": {
      "title": "Interfaces related functionality.",

      "definitions": {
        "ethernets": {
          "title": "A collection of interfaces.",
          "type" : "array",
          "items": {
            "$ref": "#/children/interfaces/definitions/ethernet"
          }
        },
        "ethernet" : {
          "title"     : "A single interface.",
          "type"      : "object",
          "properties": {
            "status"     : {
              "title": "Status.",
              "type" : "object",

              "properties": {
                "admin"      : {
                  "title"   : "The status desired by the user for this interface to have.<br />Possible values are:<br /><ul class='docs-no-margin-bottom'><li><abbr title='Ready to pass packets (if admin status is changed to up, then operational status should change to up if the interface is ready to transmit and receive network traffic).'>UP</abbr></li><li><abbr title='If admin status is down, then operational status should be down.'>DOWN</abbr></li></ul>",
                  "type"    : "string",
                  "required": true,
                  "enum"    : [
                    "UP",
                    "DOWN"
                  ]
                },
                "operational": {
                  "title"   : "The real status this interface has.<br />Possible values are:<br /><ul class='docs-no-margin-bottom'><li><abbr title='Ready to pass packets (if admin status is changed to up, then operational status should change to up if the interface is ready to transmit and receive network traffic).'>UP</abbr></li><li><abbr title='If admin status is down, then operational status should be down.'>DOWN</abbr></li><li><abbr title='Status can not be determined for some reason.'>UNKNOWN</abbr></li><li><abbr title='Some component is missing, typically hardware.'>NOTPRESENT</abbr></li></ul>",
                  "type"    : "string",
                  "required": true,
                  "readonly": true,
                  "enum"    : [
                    "UP",
                    "DOWN",
                    "UNKNOWN",
                    "NOTPRESENT"
                  ]
                }
              }
            },
            "name"       : {
              "title"   : "The interface identifier.",
              "type"    : "string",
              "required": true,
              "unique"  : true,
              "readonly": true
            },
            "mac"        : {
              "title"  : "<abbr title='Medium Access Control'>MAC</abbr>. The physical address for this interface.",
              "type"   : "string",
              "pattern": "^([0-9a-f]{2}([:-]|$)){6}$"
            },
            "mtu"        : {
              "title": "<abbr title='Maximum Transfer Unit'>MTU</abbr>. The maximum transfer unit this interface supports.",
              "type" : "number"
            },
            "description": {
              "type" : "string",
              "title": "Description."
            }
          }
        },
        "addresses": {
          "title": "A collection of IP <code>addresses</code>.",
          "type" : "array",
          "items": {
            "$ref": "#/children/interfaces/definitions/address"
          }
        },
        "address"  : {
          "title"     : "A single IP <code>address</code>.",
          "type"      : "object",
          "properties": {
            "interface"  : {
              "title"   : "The parent interface this <code>address</code> should belowns to.",
              "type"    : "string",
              "required": true,
              "readonly": true
            },
            "address"    : {
              "title"   : "The <code>address</code> of the interface. The format of the <code>address</code> depends on the protocol. It is a dotted quad for IP and a sequence of hexadecimal halfwords separated by colons for IPv6. The <code>address</code> may be followed by a slash and a decimal number which encodes the network prefix length.",
              "type"    : "string",
              "required": true,
              "readonly": true
            },
            "peer"       : {
              "title"   : "The <code>address</code> of the remote endpoint for pointopoint interfaces. Again, the <code>address</code> may be followed by a slash and a decimal number, encoding the network prefix length. If a peer address is specified, the local address cannot have a prefix length. The network prefix is associated with the peer rather than with the local address.",
              "type"    : "string",
              "readonly": true
            },
            "broadcast"  : {
              "title"   : "The broadcast <code>address</code> on the interface. It is possible to use the special symbols <code>+</code> and <code>-</code> instead of the broadcast address. In this case, the broadcast address is derived by setting/resetting the host bits of the interface prefix.<br /><br /><div class='alert alert-danger docs-no-margin-bottom'><strong>Warning:</strong>&nbsp;This field is not set unless explicitly requested.</div>",
              "type"    : "string",
              "readonly": true
            },
            "scope"      : {
              "title"   : "The scope of the area where this <code>address</code> is valid.<br />Possible values are:<br /><ul class='docs-no-margin-bottom'><li><abbr title='the address is valid only inside this host.'>host</abbr></abbr></li><li><abbr title='The address is link local, i.e. it is valid only on this device.'>link</abbr></li><li><abbr title='The address is globally valid.'>global</abbr></li><li>nowhere</li><li><abbr title='(IPv6 only) the address is site local, i.e. it is valid inside this site.'>site</abbr></li></ul>",
              "type"    : "string",
              "enum"    : [
                "host",
                "link",
                "global",
                "nowhere",
                "site"
              ],
              "readonly": true
            },
            "description": {
              "type" : "string",
              "title": "Description."
            }
          }
        }
      },

      "methods": {
        "GET": {
          "title": "Show <code>interfaces</code> level menu."
        }
      },

      "children": {
        "ethernets": {
          "title": "Ethernets information.",

          "methods": {
            "GET": {
              "title": "Show an <code>ethernets</code> collection.",

              "response": {
                "$ref": "#/children/interfaces/definitions/ethernets"
              }
            }
          },

          "children": {
            ":name": {
              "title": "Ethernet.",

              "methods": {
                "GET"   : {
                  "title": "Show an <code>ethernet</code>.",

                  "response": {
                    "$ref": "#/children/interfaces/definitions/ethernet"
                  }
                },
                "PUT"   : {
                  "title": "Updates an <code>ethernet</code> properties.",

                  "request": {
                    "$ref": "#/children/interfaces/definitions/ethernet"
                  }
                },
                "DELETE": {
                  "title"      : "Delete an <code>ethernet</code>.",
                  "description": "Deletes an <code>ethernet</code> interface only if its operational status is <strong>NOTPRESENT</strong>. Thus, this operation is invalid otherwise."
                }
              },

              "children": {
                "addresses": {
                  "title": "Addresses.",

                  "methods": {
                    "GET" : {
                      "title": "Show an <code>addresses</code> collection.",

                      "response": {
                        "$ref": "#/children/interfaces/definitions/addresses"
                      }
                    },
                    "POST": {
                      "title": "Creates a new <code>address</code>.",

                      "request": {
                        "$ref": "#/children/interfaces/definitions/address"
                      },

                      "response": {
                        "$ref": "#/children/interfaces/definitions/address"
                      }
                    }
                  },

                  "children": {
                    ":address": {
                      "title": "Address.",

                      "methods": {
                        "GET"   : {
                          "title": "Show an <code>address</code>.",

                          "response": {
                            "$ref": "#/children/interfaces/definitions/address"
                          }
                        },
                        "PUT"   : {
                          "title": "Updates an <code>address</code> properties.",

                          "request": {
                            "$ref": "#/children/interfaces/definitions/address"
                          }
                        },
                        "DELETE": {
                          "title": "Delete an <code>address</code>."
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },

        "loopbacks": {
          "title": "Loopbacks information.",

          "methods": {
            "GET": {
              "title": "Show a <code>loopbacks</code> collection.",

              "response": {
                "$ref": "#/children/interfaces/definitions/ethernets"
              }
            }
          },

          "children": {
            ":name": {
              "title": "Loopback.",

              "methods": {
                "GET"   : {
                  "title": "Show a <code>loopback</code>.",

                  "response": {
                    "$ref": "#/children/interfaces/definitions/ethernet"
                  }
                },
                "PUT"   : {
                  "title": "Updates a <code>loopback</code> properties.",

                  "request": {
                    "$ref": "#/children/interfaces/definitions/ethernet"
                  }
                },
                "DELETE": {
                  "title"      : "Delete a <code>loopback</code>.",
                  "description": "Deletes a <code>loopback</code> interface only if its operational status is <strong>NOTPRESENT</strong>. Thus, this operation is invalid otherwise."
                }
              },

              "children": {
                "addresses": {
                  "title": "Addresses.",

                  "methods": {
                    "GET" : {
                      "title": "Show an <code>addresses</code> collection.",

                      "response": {
                        "$ref": "#/children/interfaces/definitions/addresses"
                      }
                    },
                    "POST": {
                      "title": "Creates a new <code>address</code>.",

                      "request": {
                        "$ref": "#/children/interfaces/definitions/address"
                      },

                      "response": {
                        "$ref": "#/children/interfaces/definitions/address"
                      }
                    }
                  },

                  "children": {
                    ":address": {
                      "title": "Address.",

                      "methods": {
                        "GET"   : {
                          "title": "Show an <code>address</code>.",

                          "response": {
                            "$ref": "#/children/interfaces/definitions/address"
                          }
                        },
                        "PUT"   : {
                          "title": "Updates an <code>address</code> properties.",

                          "request": {
                            "$ref": "#/children/interfaces/definitions/address"
                          }
                        },
                        "DELETE": {
                          "title": "Delete an <code>address</code>."
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },

    "system": {
      "title": "System related functionality.",

      "methods": {
        "GET": {
          "title": "Show <code>system</code> level menu."
        }
      },

      "children": {
        "info": {
          "title": "System specific information.",

          "definitions": {
            "infos": {
              "title": "A collection of <code>info</code> objects.",
              "type" : "array",
              "items": {
                "$ref": "#/children/system/children/info/definitions/info"
              }
            },
            "info" : {
              "title"     : "An <code>info</code> object.",
              "type"      : "object",
              "properties": {
                "name" : {
                  "title"   : "Name of the requested <code>info</code> object.",
                  "type"    : "string",
                  "required": true,
                  "readonly": true,
                  "unique"  : true,
                  "enum"    : [
                    "time",
                    "os",
                    "memory",
                    "load",
                    "swap",
                    "disks",
                    "cpus"
                  ]
                },
                "value": {
                  "title"   : "Value of the requested <code>info</code> object. This value type depends on the <code>name</code> property.",
                  "type"    : "mixed",
                  "required": true
                }
              }
            }
          },

          "methods": {
            "GET": {
              "title": "Show specific information about the system.",

              "response": {
                "$ref": "#/children/system/children/info/definitions/infos"
              }
            }
          },

          "children": {
            ":name": {
              "title": "Specific section of system information.",

              "methods": {
                "GET": {
                  "title": "Show specific section of system information.",

                  "response": {
                    "$ref": "#/children/system/children/info/definitions/info"
                  }
                }
              },

              "instances": {
                "time"  : {
                  "title"     : "Information about system times.",
                  "type"      : "object",
                  "properties": {
                    "value": {
                      "type": "object",

                      "properties": {
                        "up"     : {
                          "title": "The system uptime in seconds.",
                          "type" : "number"
                        },
                        "current": {
                          "title": "The current system time in milliseconds.",
                          "type" : "number"
                        }
                      }
                    }
                  }
                },
                "os"    : {
                  "title"     : "OS related information.",
                  "type"      : "object",
                  "properties": {
                    "value": {
                      "type": "object",

                      "properties": {
                        "type"    : {
                          "title": "The OS name.",
                          "type" : "string"
                        },
                        "arch"    : {
                          "title": "The OS CPU architecture.",
                          "type" : "string"
                        },
                        "release" : {
                          "title": "The OS release.",
                          "type" : "string"
                        },
                        "platform": {
                          "title": "The OS platform.",
                          "type" : "string"
                        }
                      }
                    }
                  }
                },
                "memory": {
                  "title"     : "Memory related information.",
                  "type"      : "object",
                  "properties": {
                    "value": {
                      "type": "object",

                      "properties": {
                        "installed": {
                          "title": "Total amount of system memory in bytes.",
                          "type" : "number"
                        },
                        "usage"    : {
                          "title": "The memory utilization in percent.",
                          "type" : "number"
                        }
                      }
                    }
                  }
                },
                "load"  : {
                  "title"      : "An array containing the 1, 5, and 15 minute system load averages.",
                  "description": "The load average is a measure of system activity, calculated by the operating system and expressed as a fractional number. As a rule of thumb, the load average should ideally be less than the number of logical CPUs in the system.",
                  "type"       : "object",
                  "properties" : {
                    "value": {
                      "type": "array",

                      "items": [
                        {
                          "title": "1min load average.",
                          "type" : "number"
                        },
                        {
                          "title": "5min load average.",
                          "type" : "number"
                        },
                        {
                          "title": "15min load average.",
                          "type" : "number"
                        }
                      ]
                    }
                  }
                },
                "swap"  : {
                  "title"     : "SWAP related information.",
                  "type"      : "object",
                  "properties": {
                    "value": {
                      "type": "object",

                      "properties": {
                        "installed": {
                          "title": "Total amount of SWAP memory in bytes.",
                          "type" : "number"
                        },
                        "usage"    : {
                          "title": "The SWAP utilization in percent.",
                          "type" : "number"
                        }
                      }
                    }
                  }
                },
                "disks" : {
                  "title"     : "Information about the disks available in the system.",
                  "type"      : "object",
                  "properties": {
                    "value": {
                      "type": "array",

                      "items": {
                        "type": "object",

                        "properties": {
                          "installed": {
                            "title": "Total amount of disk space in bytes.",
                            "type" : "number"
                          },
                          "usage"    : {
                            "title": "The space utilization in bytes.",
                            "type" : "number"
                          },
                          "device"   : {
                            "title": "The device identification for the partition.",
                            "type" : "string"
                          },
                          "path"     : {
                            "title": "The mounting path for the device.",
                            "type" : "string"
                          }
                        }
                      }
                    }
                  }
                },
                "cpus"  : {
                  "title"     : "An array of objects containing information about each CPU/core installed.",
                  "type"      : "object",
                  "properties": {
                    "value": {
                      "type": "array",

                      "items": {
                        "type": "object",

                        "properties": {
                          "model": {
                            "title": "The CPU model.",
                            "type" : "string"
                          },
                          "speed": {
                            "title": "The CPU speed.",
                            "type" : "string"
                          },
                          "usage": {
                            "title": "The CPU utilization in percent.",
                            "type" : "number"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },

        "settings": {
          "title": "System specific settings.",

          "definitions": {
            "settings": {
              "title": "A collection of <code>settings</code> objects.",
              "type" : "array",
              "items": {
                "$ref": "#/children/system/children/settings/definitions/setting"
              }
            },
            "setting" : {
              "title"     : "A <code>setting</code> object.",
              "type"      : "object",
              "properties": {
                "name"       : {
                  "title"   : "Name of the requested setting object.",
                  "type"    : "string",
                  "required": true,
                  "readonly": true,
                  "unique"  : true,
                  "enum"    : [
                    "hostname",
                    "domain",
                    "nameservers"
                  ]
                },
                "value"      : {
                  "title"   : "Value of the requested setting object. This value type depends on the <code>name</code> property.",
                  "type"    : "mixed",
                  "required": true
                },
                "description": {
                  "title": "Description for this <code>setting</code> object.",
                  "type" : "string"
                }
              }
            }
          },

          "methods": {
            "GET": {
              "title": "Show system specific settings.",

              "response": {
                "$ref": "#/children/system/children/settings/definitions/settings"
              }
            }
          },

          "children": {
            ":name": {
              "title": "Specific system setting name.",

              "methods": {
                "GET": {
                  "title": "Show a specific system <code>setting</code>.",

                  "response": {
                    "$ref": "#/children/system/children/settings/definitions/setting"
                  }
                }
              },

              "instances": {
                "hostname"   : {
                  "type"      : "object",
                  "properties": {
                    "value": {
                      "type" : "string",
                      "title": "The hostname of the operating system."
                    }
                  }
                },
                "domain"     : {
                  "type"      : "object",
                  "properties": {
                    "value": {
                      "type" : "string",
                      "title": "The domain of the operating system."
                    }
                  }
                },
                "nameservers": {
                  "title"     : "The nameservers of the operating system.",
                  "type"      : "object",
                  "properties": {
                    "value": {
                      "type": "array",

                      "items": [
                        {
                          "title": "Primary nameserver.",
                          "type" : "string"
                        },
                        {
                          "title": "Secondary nameserver.",
                          "type" : "string"
                        },
                        {
                          "title": "Tertiary nameserver.",
                          "type" : "string"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        },

        "tunables": {
          "title": "System tuning settings.",

          "definitions": {
            "tunables": {
              "title": "A collection of <code>tunable</code> objects.",
              "type" : "array",
              "items": {
                "$ref": "#/children/system/children/tunables/definitions/tunable"
              }
            },
            "tunable" : {
              "title"     : "A single <code>tunable</code> object.",
              "type"      : "object",
              "properties": {
                "path"       : {
                  "title"   : "The file path to the <kbd>/proc/sys/</kbd> setting that wants to be tuned.",
                  "type"    : "string",
                  "required": true,
                  "unique"  : true,
                  "readonly": true
                },
                "value"      : {
                  "title"   : "The value to be set in the file descriptor.",
                  "type"    : "string",
                  "required": true
                },
                "description": {
                  "type" : "string",
                  "title": "Description."
                }
              }
            }
          },

          "methods": {
            "GET" : {
              "title": "Show system tuning settings.",

              "response": {
                "$ref": "#/children/system/children/tunables/definitions/tunables"
              }
            },
            "POST": {
              "title": "Creates a new <code>tunable</code>.",

              "request": {
                "$ref": "#/children/system/children/tunables/definitions/tunable"
              },

              "response": {
                "$ref": "#/children/system/children/tunables/definitions/tunable"
              }
            }
          },

          "children": {
            ":path": {
              "title": "Specific system <code>tunable</code>.",

              "methods": {
                "GET"   : {
                  "title": "Show a specific system <code>tunable</code>.",

                  "response": {
                    "$ref": "#/children/system/children/tunables/definitions/tunable"
                  }
                },
                "PUT"   : {
                  "title": "Updates a <code>tunable</code> setting.",

                  "request": {
                    "$ref": "#/children/system/children/tunables/definitions/tunable"
                  }
                },
                "DELETE": {
                  "title": "Delete a <code>tunable</code>."
                }
              }
            }
          }
        },

        "logging": {
          "title": "System logging settings.",

          "methods": {
            "GET": {
              "title": "Show system <code>logging</code> menu."
            }
          },

          "children": {
            "logs": {
              "title": "System logs.",

              "definitions": {
                "logs": {
                  "title": "A collection of <code>logs</code> objects.",
                  "type" : "array",
                  "items": {
                    "$ref": "#/children/system/children/logging/children/logs/definitions/log"
                  }
                },
                "log" : {
                  "title"     : "A <code>log</code> object.",
                  "type"      : "object",
                  "properties": {
                    "id"       : {
                      "title"   : "An unique identifier for a particular <code>log</code>.",
                      "type"    : "string",
                      "required": true,
                      "unique"  : true,
                      "readonly": true
                    },
                    "module"   : {
                      "title"   : "Module that this <code>log</code> belongs to.",
                      "type"    : "string",
                      "required": true
                    },
                    "tags"     : {
                      "type" : "array",
                      "items": {
                        "title": "Categorize the <code>logs</code> to ease the search.",
                        "type" : "string"
                      }
                    },
                    "timestamp": {
                      "title": "Time when it was generated.",
                      "type" : "string"
                    },
                    "level"    : {
                      "title"   : "Severity.",
                      "type"    : "string",
                      "enum"    : [
                        "info",
                        "warn",
                        "error"
                      ],
                      "required": true
                    },
                    "message"  : {
                      "title"   : "A description for the error.",
                      "type"    : "string",
                      "required": true
                    }
                  }
                }
              },

              "methods": {
                "GET": {
                  "title": "Show system logs.",

                  "response": {
                    "$ref": "#/children/system/children/logging/children/logs/definitions/logs"
                  }
                }
              },

              "children": {
                ":id": {
                  "title": "Specific <code>log</code>.",

                  "methods": {
                    "GET"   : {
                      "title": "Show a specific <code>log</code>.",

                      "response": {
                        "$ref": "#/children/system/children/logging/children/logs/definitions/log"
                      }
                    },
                    "DELETE": {
                      "title": "Delete a <code>log</code>."
                    }
                  }
                }
              }
            },

            "settings": {
              "title": "Logging specific settings.",

              "definitions": {
                "settings": {
                  "title": "A collection of <code>settings</code> objects.",
                  "type" : "array",
                  "items": {
                    "$ref": "#/children/system/children/logging/children/settings/definitions/setting"
                  }
                },
                "setting" : {
                  "title"     : "A <code>setting</code> object.",
                  "type"      : "object",
                  "properties": {
                    "name"       : {
                      "title"   : "Name of the requested setting object.",
                      "type"    : "string",
                      "required": true,
                      "readonly": true,
                      "unique"  : true,
                      "enum"    : [
                        "transport_console",
                        "transport_file",
                        "transport_mongodb"
                      ]
                    },
                    "value"      : {
                      "title"   : "Value of the requested setting object. This value type depends on the <code>name</code> property.",
                      "type"    : "mixed",
                      "required": true
                    },
                    "description": {
                      "title": "Description for this <code>setting</code> object.",
                      "type" : "string"
                    }
                  }
                }
              },

              "methods": {
                "GET": {
                  "title": "Show logging specific settings.",

                  "response": {
                    "$ref": "#/children/system/children/logging/children/settings/definitions/settings"
                  }
                }
              },

              "children": {
                ":name": {
                  "title": "Specific logging setting name.",

                  "methods": {
                    "GET": {
                      "title": "Show a specific logging <code>setting</code>.",

                      "response": {
                        "$ref": "#/children/system/children/logging/children/settings/definitions/setting"
                      }
                    }
                  },

                  "instances": {
                    "transport_console": {
                      "title": "Settings for the <code>console</code> transport.",
                      "type" : "object",

                      "properties": {
                        "value": {
                          "type": "object",

                          "properties": {
                            "enabled"  : {
                              "title": "Whether the transport is enabled or not.",
                              "type" : "boolean"
                            },
                            "colorize" : {
                              "title": "Whether the logs should be colorized in the output or not.",
                              "type" : "boolean"
                            },
                            "timestamp": {
                              "title": "Whether a timestamp should be added to the logs when they are generated.",
                              "type" : "boolean"
                            }
                          }
                        }
                      }
                    },
                    "transport_file"   : {
                      "title": "Settings for the <code>file</code> transport.",
                      "type" : "object",

                      "properties": {
                        "value": {
                          "type": "object",

                          "properties": {
                            "enabled"  : {
                              "title": "Whether the transport is enabled or not.",
                              "type" : "boolean"
                            },
                            "colorize" : {
                              "title": "Whether the logs should be colorized in the output or not.",
                              "type" : "boolean"
                            },
                            "timestamp": {
                              "title": "Whether a timestamp should be added to the logs when they are generated.",
                              "type" : "boolean"
                            },
                            "filename" : {
                              "title": "The file path where the logs should be saved to.",
                              "type" : "string"
                            }
                          }
                        }
                      }
                    },
                    "transport_mongodb": {
                      "title": "Settings for the <code>mongodb</code> transport.",
                      "type" : "object",

                      "properties": {
                        "value": {
                          "type": "object",

                          "properties": {
                            "enabled": {
                              "title": "Whether the transport is enabled or not.",
                              "type" : "boolean"
                            },
                            "db"     : {
                              "title": "The database name where the logs should be saved to.",
                              "type" : "string"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}